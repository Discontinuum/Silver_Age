#textdomain wesnoth-2
[unit_type]
    id=Royal Sun Mage Temp
    name= _ "Mage of Sun"
    race=SA_human
    num_traits=3
    gender=male,female
    image="units/royal-army/mages/sun-mage/stand.png"
    {MAGENTA_IS_THE_TEAM_COLOR}
    profile="portraits/royal-army/transparent/sun-mage.png"
    small_profile="portraits/royal-army/transparent/sun-mage.png~SCALE(205,205)~FL()"
    hitpoints=56
    movement_type=civilianfoot
    movement=5
    vision=5
    experience=210
    level=3
    {ALIGNMENT_SELFISH}
    advances_to=Royal Great Mage Temp
    cost=60
    usage=mixed fighter
    description= _ "Four of twelve chairs in the Archmages Council are reserved for best of the red mages. They are called ''Solaris Magus'', which means ''mages of sun''. Long time ago they left Academy as fledglings, and now they they returning from war as seasoned veterans. Now they should share their experience with the younger generation of mages, and Council will get from them insight about what the practical aspects of magic using are. Although days when sun mages have eight of twelve Council's chairs and was able to completely determine the Academy policy are gone, their votes still have weight. Unfortunately, this is what causes many of aggressive and unwise decisions as many of sun mages are paranoid and suffering from nervous disorders on the basis of things, which they have seen on the war. Of course Council doing everything possible to choose more wise and calm archmages, but sometimes temptation to choose much stronger and less wise ones is too strong.

Tactical Info:

Pupil: Day type
* +5% accuracy and +1 vision range at daytime.
* -10% accuracy and -1 vision range at night.

Alignment: Selfish
* from 0 to 25% damage bonus when unit's HP from 50 to 100% of maximum.
* from 0 to 25% damage penalty when unit's HP from 50 to 0% of maximum.

Movement type: Civilian
* not good at castle and village defending.

Armor type: Human fire mage without armor
* exclusively resistant to fire magic.
* vulnerable for impact and blade damage.

Damage type: Fire
* very effective against woses and other plants.
* more effective against skeletons and frogs.
* less effective against nagas, trolls and hardy units.
* uneffective against ghosts, drakes and dragons.

Spells: 1 basic, 1 average and 1 high
* fireball (basic): advanced version of ''energy stream''. Calls few balls of magic energy, which causes fire damage. Firing rate increases with unit's level. 7-5 damage at the current level.
* flaming blade (average): calls an flaming blade which is more effective on melee combat than staff. Flaming blade inflicts fire damage, which increases with unit's level. 12-2 damage at the current level.
* stream of flame (average): calls a impetuous stream of magic energy, which causes fire damage. It forestall opponent's ranged attacks and has 90% accuracy against slowed or distracted units. Power of spell increases with unit's level. 16-2 damage at the current level.
* fire mine (average): inflicts fire damage to opponents if they try to attack unit at melee combat. 12 damage at the current level.
* heat aura (average): increases cold resistance and decreases fire resistance of all adjacent units by 20%.
* dragon flame (high, requires ''stream of flame''): advanced version of ''stream of flame''. Calls a impetuous stream of sticky flammable liquid, which causes fire damage. It forestall opponent's ranged attacks and has 90% accuracy against slowed or distracted units. Flames may spread on opponents, who hasn't fire resistance. Power of spell increases with unit's level. 16-2 damage at the current level.
* flaming tomb (high): Calls an flamig dome, which covers the opponent. If spell is successfull, it inflicts signficant fire damage and may incinerate fire-vulnerable units. Chance to hit increases with unit's level. 18-1 damage with 5% additional accuracy at the current level.
* lightning (high): even more advanced version of ''energy stream'' which replaces ''fireball''. Calls few lightnings which inflicts unresistable damage with additional harm for units which located in water or under rain. Number of lightnings increases with unit's level. Basic damage at the current level is 12-3."
    die_sound={SOUND_LIST:HUMAN_OLD_DIE}
    [resistance]
	arcane=100
	fire=50
	cold=100
	impact=120
	blade=120
	pierce=100
    [/resistance]
    [abilities]
    	{FLAG_MAGE}
    [/abilities]
    [attack]
        name=spell_102
        description=_"fireball"
	icon=attacks/fireball.png
        type=fire
        range=ranged
        [specials]
            {WEAPON_SPECIAL_MAGICAL}
        [/specials]
        damage=7
        number=5
    [/attack]
    [attack]
        name=staff
        description=_"staff"
        icon=attacks/staff-ruby.png
        type=impact
        range=melee
        damage=8
        number=2
    [/attack]
    [standing_anim]
        start_time=0
	{STAND_ON_WATER}
	[if]
	    [filter]
		ability=heat_aura1
	    [/filter]
            [frame]
	    	halo="halo/sun-mage/heat-aura-[1~2].png:100"
		image="units/royal-army/mages/sun-mage/stand-[1~7].png"
            [/frame]
	[/if]
	[else]
            [frame]
	    	image="units/royal-army/mages/sun-mage/stand-[1~7].png"
            [/frame]
	[/else]
    [/standing_anim]
    [defend]
        start_time=-250
	{STAND_ON_WATER}
	[if]
	    [filter]
		ability=heat_aura1
	    [/filter]
            [frame]
		image="units/royal-army/mages/sun-mage/stand.png":1,"units/royal-army/mages/sun-mage/stand.png":400,"units/royal-army/mages/sun-mage/stand.png":1
	    	halo="halo/sun-mage/heat-aura-[1~2].png:100"
            [/frame]
	[/if]
	[else]
            [frame]
            	image="units/royal-army/mages/sun-mage/stand.png":1,"units/royal-army/mages/sun-mage/stand.png":400,"units/royal-army/mages/sun-mage/stand.png":1
            [/frame]
	[/else]       
        [if]
            hit_sound_start_time=-25
            hits=hit
            [hit_sound_frame]
                sound={SOUND_LIST:HUMAN_OLD_HIT}
            [/hit_sound_frame]
        [/if]
    [/defend]
    [recruit_anim]
	{STAND_ON_WATER}
	[if]
	    frequency=2
            start_time=-9000
            [frame]
            	image="units/royal-army/mages/sun-mage/stand-[1~7].png:100"
            	sound="royal-army/sun-mage/intro.wav"
            [/frame]
	[/if]
    [/recruit_anim]
    [levelin_anim]
        start_time=-9000
	{STAND_ON_WATER}
        [frame]
	    image="units/royal-army/mages/sun-mage/stand-[1~7].png:100"
            sound="royal-army/sun-mage/intro.wav"
        [/frame]
    [/levelin_anim]
    [draw_weapon_anim]
        [filter_attack]
            name=spell_102
        [/filter_attack]
	{STAND_ON_WATER}
	[if]
	    [filter]
		ability=heat_aura1
	    [/filter]
	    [if]
	    	frequency=4
                start_time=-3000
            	[frame]
            	    image="units/royal-army/mages/sun-mage/stand-[1~7].png:100"
            	    sound="royal-army/sun-mage/attack-fireball.wav"
		    halo="halo/sun-mage/heat-aura-[1~2].png:100"
		    duration=3000
            	[/frame]
	    [/if]
	    [else]
                start_time=0
       	    	[frame]
            	    image="units/royal-army/mages/sun-mage/stand-[1~7].png:100"
		    halo="halo/sun-mage/heat-aura-[1~2].png:100"
            	[/frame]
	    [/else]
	[/if]
	[else]
	    [if]
	    	frequency=4
                start_time=-3000
            	[frame]
            	    image="units/royal-army/mages/sun-mage/stand-[1~7].png:100"
            	    sound="royal-army/sun-mage/attack-fireball.wav"
		    duration=3000
            	[/frame]
	    [/if]
	    [else]
                start_time=0
       	    	[frame]
            	    image="units/royal-army/mages/sun-mage/stand-[1~7].png:100"
            	[/frame]
	    [/else]	
	[/else]
    [/draw_weapon_anim]
    [draw_weapon_anim]
        [filter_attack]
            name=spell_201
        [/filter_attack]
	{STAND_ON_WATER}
	[if]
	    [filter]
		ability=heat_aura1
	    [/filter]
	    [if]
	    	frequency=4
                start_time=-3000
            	[frame]
            	    image="units/royal-army/mages/sun-mage/stand-[1~7].png:100"
            	    sound="royal-army/sun-mage/attack-flamestream.wav"
		    halo="halo/sun-mage/heat-aura-[1~2].png:100"
		    duration=3000
            	[/frame]
	    [/if]
	    [else]
                start_time=0
       	    	[frame]
            	    image="units/royal-army/mages/sun-mage/stand-[1~7].png:100"
		    halo="halo/sun-mage/heat-aura-[1~2].png:100"
            	[/frame]
	    [/else]
	[/if]
	[else]
	    [if]
	    	frequency=4
                start_time=-3000
            	[frame]
            	    image="units/royal-army/mages/sun-mage/stand-[1~7].png:100"
            	    sound="royal-army/sun-mage/attack-flamestream.wav"
		    duration=3000
            	[/frame]
	    [/if]
	    [else]
                start_time=0
       	    	[frame]
            	    image="units/royal-army/mages/sun-mage/stand-[1~7].png:100"
            	[/frame]
	    [/else]	
	[/else]
    [/draw_weapon_anim]
    [draw_weapon_anim]
        [filter_attack]
            name=spell_301
        [/filter_attack]
	{STAND_ON_WATER}
	[if]
	    [filter]
		ability=heat_aura1
	    [/filter]
	    [if]
	    	frequency=4
                start_time=-4000
            	[frame]
            	    image="units/royal-army/mages/sun-mage/stand-[1~7].png:100"
            	    sound="royal-army/sun-mage/attack-dragonflame.wav"
		    halo="halo/sun-mage/heat-aura-[1~2].png:100"
		    duration=4000
            	[/frame]
	    [/if]
	    [else]
                start_time=0
       	    	[frame]
            	    image="units/royal-army/mages/sun-mage/stand-[1~7].png:100"
		    halo="halo/sun-mage/heat-aura-[1~2].png:100"
            	[/frame]
	    [/else]
	[/if]
	[else]
	    [if]
	    	frequency=4
                start_time=-4000
            	[frame]
            	    image="units/royal-army/mages/sun-mage/stand-[1~7].png:100"
            	    sound="royal-army/sun-mage/attack-dragonflame.wav"
		    duration=4000
            	[/frame]
	    [/if]
	    [else]
                start_time=0
       	    	[frame]
            	    image="units/royal-army/mages/sun-mage/stand-[1~7].png:100"
            	[/frame]
	    [/else]	
	[/else]
    [/draw_weapon_anim]
    [draw_weapon_anim]
        [filter_attack]
            name=spell_302
        [/filter_attack]
	{STAND_ON_WATER}
	[if]
	    [filter]
		ability=heat_aura1
	    [/filter]
	    [if]
	    	frequency=4
                start_time=-3000
            	[frame]
            	    image="units/royal-army/mages/sun-mage/stand-[1~7].png:100"
            	    sound="royal-army/sun-mage/attack-lightning.wav"
		    halo="halo/sun-mage/heat-aura-[1~2].png:100"
		    duration=3000
            	[/frame]
	    [/if]
	    [else]
                start_time=0
       	    	[frame]
            	    image="units/royal-army/mages/sun-mage/stand-[1~7].png:100"
		    halo="halo/sun-mage/heat-aura-[1~2].png:100"
            	[/frame]
	    [/else]
	[/if]
	[else]
	    [if]
	    	frequency=4
                start_time=-3000
            	[frame]
            	    image="units/royal-army/mages/sun-mage/stand-[1~7].png:100"
            	    sound="royal-army/sun-mage/attack-lightning.wav"
		    duration=3000
            	[/frame]
	    [/if]
	    [else]
                start_time=0
       	    	[frame]
            	    image="units/royal-army/mages/sun-mage/stand-[1~7].png:100"
            	[/frame]
	    [/else]	
	[/else]
    [/draw_weapon_anim]
    [draw_weapon_anim]
        [filter_attack]
            name=spell_303
        [/filter_attack]
	{STAND_ON_WATER}
	[if]
	    [filter]
		ability=heat_aura1
	    [/filter]
	    [if]
	    	frequency=4
                start_time=-4000
            	[frame]
            	    image="units/royal-army/mages/sun-mage/stand-[1~7].png:100"
            	    sound="royal-army/sun-mage/attack-flametomb.wav"
		    halo="halo/sun-mage/heat-aura-[1~2].png:100"
		    duration=4000
            	[/frame]
	    [/if]
	    [else]
                start_time=0
       	    	[frame]
            	    image="units/royal-army/mages/sun-mage/stand-[1~7].png:100"
		    halo="halo/sun-mage/heat-aura-[1~2].png:100"
            	[/frame]
	    [/else]
	[/if]
	[else]
	    [if]
	    	frequency=4
                start_time=-4000
            	[frame]
            	    image="units/royal-army/mages/sun-mage/stand-[1~7].png:100"
            	    sound="royal-army/sun-mage/attack-flametomb.wav"
		    duration=4000
            	[/frame]
	    [/if]
	    [else]
                start_time=0
       	    	[frame]
            	    image="units/royal-army/mages/sun-mage/stand-[1~7].png:100"
            	[/frame]
	    [/else]	
	[/else]
    [/draw_weapon_anim]
    [draw_weapon_anim]
        [filter_attack]
	    [not]
            	name=spell_201
		[or]
		    name=spell_102
		    [or]
			name=spell_301
			[or]
			    name=spell_302
			    [or]
				name=spell_303
			    [/or]
			[/or]
		    [/or]
		[/or]
	    [/not]
        [/filter_attack]
	{STAND_ON_WATER}
	[if]
	    [filter]
		ability=heat_aura1
	    [/filter]
	    [if]
	    	frequency=4
                start_time=-4000
            	[frame]
            	    image="units/royal-army/mages/sun-mage/stand-[1~7].png:100"
            	    sound="royal-army/sun-mage/attack.wav"
		    halo="halo/sun-mage/heat-aura-[1~2].png:100"
		    duration=4000
            	[/frame]
	    [/if]
	    [else]
                start_time=0
       	    	[frame]
             	    image="units/royal-army/mages/sun-mage/stand-[1~7].png:100"
		    halo="halo/sun-mage/heat-aura-[1~2].png:100"
            	[/frame]
	    [/else]
	[/if]
	[else]
	    [if]
	    	frequency=4
                start_time=-4000
            	[frame]
            	    image="units/royal-army/mages/sun-mage/stand-[1~7].png:100"
            	    sound="royal-army/sun-mage/attack.wav"
		    duration=4000
            	[/frame]
	    [/if]
	    [else]
                start_time=0
       	    	[frame]
             	    image="units/royal-army/mages/sun-mage/stand-[1~7].png:100"
            	[/frame]
	    [/else]
	[/else]	
    [/draw_weapon_anim]
    [attack_anim]
        [filter_attack]
            name=staff
        [/filter_attack]
	{STAND_ON_WATER}
	[if]
	    [filter]
		ability=heat_aura1
	    [/filter]
            [frame]
	    	halo="halo/sun-mage/heat-aura-[1~2].png:100"
            [/frame]
	[/if]
	[if]
            [filter]
           	[filter_wml]
              	    [status]
                 	miner=yes
              	    [/status]
           	[/filter_wml]
            [/filter]	    
            offset=0.0

            flame_burst_1_start_time=-200
            flame_burst_2_start_time=-200
            flame_burst_3_start_time=-200
            flame_burst_4_start_time=-200
            flame_burst_5_start_time=-200

            [if]
            	direction=se,s,sw

            	[flame_burst_1_frame]
                    halo=halo/flame-burst-[1~8].png~FL(vert):50
                    halo_x,halo_y=-22,0
                    offset=1.0
            	[/flame_burst_1_frame]
            	[flame_burst_2_frame]
                    halo=halo/flame-burst-[1~8].png~FL(vert):50
                    halo_x,halo_y=-14,9
                    offset=1.0
            	[/flame_burst_2_frame]
            	[flame_burst_3_frame]
                    halo=halo/flame-burst-[1~8].png~FL(vert):50
                    halo_x,halo_y=0,12
                    offset=1.0
            	[/flame_burst_3_frame]
            	[flame_burst_4_frame]
                    halo=halo/flame-burst-[1~8].png~FL(vert):50
                    halo_x,halo_y=14,9
                    offset=1.0
            	[/flame_burst_4_frame]
            	[flame_burst_5_frame]
                    halo=halo/flame-burst-[1~8].png~FL(vert):50
                    halo_x,halo_y=22,0
                    offset=1.0
            	[/flame_burst_5_frame]
            [/if]
            [else]
            	direction=ne,n,nw

            	[flame_burst_1_frame]
                    halo=halo/flame-burst-[1~8].png:50
                    halo_x,halo_y=-22,0
                    offset=1.0
            	[/flame_burst_1_frame]
            	[flame_burst_2_frame]
                    halo=halo/flame-burst-[1~8].png:50
                    halo_x,halo_y=-14,9
                    offset=1.0
            	[/flame_burst_2_frame]
            	[flame_burst_3_frame]
                    halo=halo/flame-burst-[1~8].png:50
                    halo_x,halo_y=0,12
                    offset=1.0
            	[/flame_burst_3_frame]
            	[flame_burst_4_frame]
                    halo=halo/flame-burst-[1~8].png:50
                    halo_x,halo_y=14,9
                    offset=1.0
            	[/flame_burst_4_frame]
            	[flame_burst_5_frame]
                    halo=halo/flame-burst-[1~8].png:50
                    halo_x,halo_y=22,0
                    offset=1.0
            	[/flame_burst_5_frame]
            [/else]

            {SOUND:HIT_AND_MISS fire.wav fire.wav -300}
	[/if]
	[else]
            start_time=-250
            offset=0.0~0.5:250,0.5~0.0:250
            {SOUND:HIT_AND_MISS staff.ogg staff-miss.ogg -125}
	[/else]
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=spell_202
        [/filter_attack]
	{STAND_ON_WATER}
	[if]
	    [filter]
		ability=heat_aura1
	    [/filter]
            [frame]
	    	halo="halo/sun-mage/heat-aura-[1~2].png:100"
            [/frame]
	[/if]
        start_time=-250
        offset=0.0~0.5:250,0.5~0.0:250
        {SOUND:HIT_AND_MISS {SOUND_LIST:SWORD_SWISH} {SOUND_LIST:MISS} -75}
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=spell_102
        [/filter_attack]
	{STAND_ON_WATER}
	[if]
	    [filter]
		ability=heat_aura1
	    [/filter]
            [frame]
	    	halo="halo/sun-mage/heat-aura-[1~2].png:100"
            [/frame]
	[/if]
	{MISSILE_FRAME_FIREBALL_XY 11 -20}
        {SOUND:HIT_AND_MISS fire.wav fire.wav -275}
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=spell_201
        [/filter_attack]
	{STAND_ON_WATER}
	[if]
	    [filter]
		ability=heat_aura1
	    [/filter]
            [frame]
	    	halo="halo/sun-mage/heat-aura-[1~2].png:100"
            [/frame]
	[/if]
        offset=0.0

        flame_burst_1_start_time=-400
        flame_burst_2_start_time=-350
        flame_burst_3_start_time=-300
        flame_burst_4_start_time=-250
        flame_burst_5_start_time=-200

        [if]
            direction=se,s,sw

            [flame_burst_1_frame]
                halo=halo/flame-burst-[1~8].png~FL(vert):50
                halo_x,halo_y=-22,0
                offset=1.0
            [/flame_burst_1_frame]
            [flame_burst_2_frame]
                halo=halo/flame-burst-[1~8].png~FL(vert):50
                halo_x,halo_y=-14,9
                offset=1.0
            [/flame_burst_2_frame]
            [flame_burst_3_frame]
                halo=halo/flame-burst-[1~8].png~FL(vert):50
                halo_x,halo_y=0,12
                offset=1.0
            [/flame_burst_3_frame]
            [flame_burst_4_frame]
                halo=halo/flame-burst-[1~8].png~FL(vert):50
                halo_x,halo_y=14,9
                offset=1.0
            [/flame_burst_4_frame]
            [flame_burst_5_frame]
                halo=halo/flame-burst-[1~8].png~FL(vert):50
                halo_x,halo_y=22,0
                offset=1.0
            [/flame_burst_5_frame]
        [/if]
        [else]
            direction=ne,n,nw

            [flame_burst_1_frame]
                halo=halo/flame-burst-[1~8].png:50
                halo_x,halo_y=-22,0
                offset=1.0
            [/flame_burst_1_frame]
            [flame_burst_2_frame]
                halo=halo/flame-burst-[1~8].png:50
                halo_x,halo_y=-14,9
                offset=1.0
            [/flame_burst_2_frame]
            [flame_burst_3_frame]
                halo=halo/flame-burst-[1~8].png:50
                halo_x,halo_y=0,12
                offset=1.0
            [/flame_burst_3_frame]
            [flame_burst_4_frame]
                halo=halo/flame-burst-[1~8].png:50
                halo_x,halo_y=14,9
                offset=1.0
            [/flame_burst_4_frame]
            [flame_burst_5_frame]
                halo=halo/flame-burst-[1~8].png:50
                halo_x,halo_y=22,0
                offset=1.0
            [/flame_burst_5_frame]
        [/else]

        {SOUND:HIT_AND_MISS fire.wav fire.wav -300}
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=spell_301
        [/filter_attack]
	{STAND_ON_WATER}
	[if]
	    [filter]
		ability=heat_aura1
	    [/filter]
            [frame]
	    	halo="halo/sun-mage/heat-aura-[1~2].png:100"
            [/frame]
	[/if]
        start_time=-1250
        halo_start_time=-250

        [if]
            {MISSILE_FRAME_DG_SECOND_MUZZLE_FLARE_HIT_SOUTH 0 -4}
            direction=s
        [/if]
        [else]
            {MISSILE_FRAME_DG_SECOND_MUZZLE_FLARE_HIT_DIAG_NORTH -8 10}
            direction=ne,nw
        [/else]
        [else]
            {MISSILE_FRAME_DG_SECOND_MUZZLE_FLARE_HIT_NORTH -1 16}
            direction=n
        [/else]
        [else]
            {MISSILE_FRAME_DG_SECOND_MUZZLE_FLARE_HIT_DIAG_SOUTH 0 8}
            direction=se,sw
        [/else]

        {SOUND:HIT_AND_MISS fire.wav fire.wav -250}
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=spell_303
        [/filter_attack]
	{STAND_ON_WATER}
	[if]
	    [filter]
		ability=heat_aura1
	    [/filter]
            [frame]
	    	halo="halo/sun-mage/heat-aura-[1~2].png:100"
            [/frame]
	[/if]
        offset=0.0

        flame_burst_1_start_time=-400
        flame_burst_2_start_time=-350
        flame_burst_3_start_time=-300
        flame_burst_4_start_time=-250
        flame_burst_5_start_time=-200

        [if]
            direction=se,s,sw

            [flame_burst_1_frame]
                halo=halo/flame-burst-[1~8].png~FL(vert):50
                halo_x,halo_y=-22,0
                offset=1.0
            [/flame_burst_1_frame]
            [flame_burst_2_frame]
                halo=halo/flame-burst-[1~8].png~FL(vert):50
                halo_x,halo_y=-14,9
                offset=1.0
            [/flame_burst_2_frame]
            [flame_burst_3_frame]
                halo=halo/flame-burst-[1~8].png~FL(vert):50
                halo_x,halo_y=0,12
                offset=1.0
            [/flame_burst_3_frame]
            [flame_burst_4_frame]
                halo=halo/flame-burst-[1~8].png~FL(vert):50
                halo_x,halo_y=14,9
                offset=1.0
            [/flame_burst_4_frame]
            [flame_burst_5_frame]
                halo=halo/flame-burst-[1~8].png~FL(vert):50
                halo_x,halo_y=22,0
                offset=1.0
            [/flame_burst_5_frame]
        [/if]
        [else]
            direction=ne,n,nw

            [flame_burst_1_frame]
                halo=halo/flame-burst-[1~8].png:50
                halo_x,halo_y=-22,0
                offset=1.0
            [/flame_burst_1_frame]
            [flame_burst_2_frame]
                halo=halo/flame-burst-[1~8].png:50
                halo_x,halo_y=-14,9
                offset=1.0
            [/flame_burst_2_frame]
            [flame_burst_3_frame]
                halo=halo/flame-burst-[1~8].png:50
                halo_x,halo_y=0,12
                offset=1.0
            [/flame_burst_3_frame]
            [flame_burst_4_frame]
                halo=halo/flame-burst-[1~8].png:50
                halo_x,halo_y=14,9
                offset=1.0
            [/flame_burst_4_frame]
            [flame_burst_5_frame]
                halo=halo/flame-burst-[1~8].png:50
                halo_x,halo_y=22,0
                offset=1.0
            [/flame_burst_5_frame]
        [/else]

        {SOUND:HIT_AND_MISS fire.wav fire.wav -300}
    [/attack_anim]    
    [attack_anim]
        [filter_attack]
            name=spell_302
        [/filter_attack]
	{STAND_ON_WATER}
	[if]
	    [filter]
		ability=heat_aura1
	    [/filter]
            [frame]
	    	halo="halo/sun-mage/heat-aura-[1~2].png:100"
            [/frame]
	[/if]

        {LIGHTNING_BOLT 1}

        {SOUND:HIT_AND_MISS lightning.ogg lightning-miss.ogg -300}
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=spell_302
        [/filter_attack]
	{STAND_ON_WATER}
	[if]
	    [filter]
		ability=heat_aura1
	    [/filter]
            [frame]
	    	halo="halo/sun-mage/heat-aura-[1~2].png:100"
            [/frame]
	[/if]

        {LIGHTNING_BOLT 2}

        {SOUND:HIT_AND_MISS lightning.ogg lightning-miss.ogg -300}
    [/attack_anim]
    [attack_anim]
        [filter_attack]
            name=spell_302
        [/filter_attack]
	{STAND_ON_WATER}
	[if]
	    [filter]
		ability=heat_aura1
	    [/filter]
            [frame]
	    	halo="halo/sun-mage/heat-aura-[1~2].png:100"
            [/frame]
	[/if]

        {LIGHTNING_BOLT 3}

        {SOUND:HIT_AND_MISS lightning.ogg lightning-miss.ogg -300}
    [/attack_anim] 
    [victory_anim]
        start_time=-3000
	{STAND_ON_WATER}
	[if]
	    [filter]
		ability=heat_aura1
	    [/filter]
            [frame]
	    	halo="halo/sun-mage/heat-aura-[1~2].png:100"
		image="units/royal-army/mages/sun-mage/stand-[1~7].png:100"
            	sound="royal-army/sun-mage/kill.wav"
	    	duration=3000
            [/frame]
	[/if]
	[else]
            [frame]
            	image="units/royal-army/mages/sun-mage/stand-[1~7].png:100"
            	sound="royal-army/sun-mage/kill.wav"
	    	duration=3000
            [/frame]
	[/else]
    [/victory_anim]
    [female]
        name= _ "female^Sun Sorceress"
        gender=female
        ignore_race_traits=yes
        {DAY_PUPIL}
	{TRAIT_WEAK}
	{TRAIT_BEAUTIFUL}
	{TRAIT_QUICK}
	{TRAIT_INTELLIGENT}
        num_traits=3
        {ALIGNMENT_SELFISH}
        image="units/royal-army/mages/sun-mage/female-stand.png"
        profile="portraits/royal-army/transparent/sun-mage+female.png"
    	small_profile="portraits/royal-army/transparent/sun-mage+female.png~SCALE(205,205)~FL()"
        die_sound={SOUND_LIST:HUMAN_FEMALE_DIE}
    	[attack]
            name=spell_102
            description=_"fireball"
	    icon=attacks/fireball.png
            type=fire
            range=ranged
            [specials]
            	{WEAPON_SPECIAL_MAGICAL}
            [/specials]
            damage=7
            number=5
    	[/attack]
   	[attack]
            name=staff
            description=_"staff"
            icon=attacks/staff-ruby.png
            type=impact
            range=melee
            damage=5
            number=3
        [/attack]
    	[standing_anim]
            start_time=0
	    {STAND_ON_WATER}
	    [if]
	    	[filter]
		    ability=heat_aura1
	    	[/filter]
            	[frame]
	    	    halo="halo/sun-mage/heat-aura+female-[1~2].png:100"
		    image="units/royal-army/mages/sun-mage/female-stand-[1~7].png"
            	[/frame]
	    [/if]
	    [else]
            	[frame]
	    	    image="units/royal-army/mages/sun-mage/female-stand-[1~7].png"
            	[/frame]
	    [/else]
    	[/standing_anim]
    	[defend]
            start_time=-250
	    {STAND_ON_WATER}
	    [if]
	    	[filter]
		    ability=heat_aura1
	    	[/filter]
            	[frame]
		    image="units/royal-army/mages/sun-mage/female-stand.png":1,"units/royal-army/mages/sun-mage/female-stand.png":400,"units/royal-army/mages/sun-mage/female-stand.png":1
	    	    halo="halo/sun-mage/heat-aura+female-[1~2].png:100"
            	[/frame]
	    [/if]
	    [else]
            	[frame]
            	    image="units/royal-army/mages/sun-mage/female-stand.png":1,"units/royal-army/mages/sun-mage/female-stand.png":400,"units/royal-army/mages/sun-mage/female-stand.png":1
            	[/frame]
	    [/else]       
            [if]
            	hit_sound_start_time=-25
            	hits=hit
            	[hit_sound_frame]
                     sound={SOUND_LIST:HUMAN_FEMALE_HIT}
            	[/hit_sound_frame]
            [/if]
    	[/defend]
    	[recruit_anim]
	    {STAND_ON_WATER}
	    [if]
	    	frequency=2
            	start_time=-6000
            	[frame]
		    image="units/royal-army/mages/sun-mage/female-stand.png"
            	    sound="royal-army/sun-mage/female-intro.wav"
            	[/frame]
	    [/if]
    	[/recruit_anim]
   	[levelin_anim]
            start_time=-6000
	    {STAND_ON_WATER}
            [frame]
		image="units/royal-army/mages/sun-mage/female-stand.png"
            	sound="royal-army/sun-mage/female-intro.wav"
            [/frame]
    	[/levelin_anim]
    	[draw_weapon_anim]
            [filter_attack]
            	name=spell_102
            [/filter_attack]
	    {STAND_ON_WATER}
	    [if]
	    	[filter]
		    ability=heat_aura1
	    	[/filter]
	    	[if]
	    	    frequency=4
                    start_time=-5000
            	    [frame]
            	    	image="units/royal-army/mages/sun-mage/female-stand-[1~7].png:100"
            	    	sound="royal-army/sun-mage/female-attack-fireball.wav"
		    	halo="halo/sun-mage/heat-aura+female-[1~2].png:100"
		    	duration=5000
            	    [/frame]
	    	[/if]
	    	[else]
                    start_time=0
       	    	    [frame]
            	    	image="units/royal-army/mages/sun-mage/female-stand-[1~7].png:100"
		    	halo="halo/sun-mage/heat-aura+female-[1~2].png:100"
            	    [/frame]
	    	[/else]
	    [/if]
	    [else]
	    	[if]
	    	    frequency=4
                    start_time=-5000
            	    [frame]
            	    	image="units/royal-army/mages/sun-mage/female-stand-[1~7].png:100"
            	    	sound="royal-army/sun-mage/female-attack-fireball.wav"
		    	duration=5000
            	    [/frame]
	    	[/if]
	    	[else]
                    start_time=0
       	    	    [frame]
            	    	image="units/royal-army/mages/sun-mage/female-stand-[1~7].png:100"
             	    [/frame]
	    	[/else]	
	    [/else]
    	[/draw_weapon_anim]
    	[draw_weapon_anim]
            [filter_attack]
            	name=spell_201
            [/filter_attack]
	    {STAND_ON_WATER}
	    [if]
	    	[filter]
		    ability=heat_aura1
	    	[/filter]
	    	[if]
	    	    frequency=4
                    start_time=-6000
            	    [frame]
            	    	image="units/royal-army/mages/sun-mage/female-stand-[1~7].png:100"
            	    	sound="royal-army/sun-mage/female-attack-flamestream.wav"
		    	halo="halo/sun-mage/heat-aura+female-[1~2].png:100"
		    	duration=6000
            	    [/frame]
	    	[/if]
	    	[else]
                    start_time=0
       	    	    [frame]
            	    	image="units/royal-army/mages/sun-mage/female-stand-[1~7].png:100"
		    	halo="halo/sun-mage/heat-aura+female-[1~2].png:100"
            	    [/frame]
	    	[/else]
	    [/if]
	    [else]
	    	[if]
	    	    frequency=4
                    start_time=-6000
            	    [frame]
            	    	image="units/royal-army/mages/sun-mage/female-stand-[1~7].png:100"
            	    	sound="royal-army/sun-mage/female-attack-flamestream.wav"
		    	duration=6000
            	    [/frame]
	    	[/if]
	    	[else]
                    start_time=0
       	    	    [frame]
            	    	image="units/royal-army/mages/sun-mage/female-stand-[1~7].png:100"
            	    [/frame]
	    	[/else]	
	    [/else]
    	[/draw_weapon_anim]
    	[draw_weapon_anim]
            [filter_attack]
            	name=spell_301
            [/filter_attack]
	    {STAND_ON_WATER}
	    [if]
	    	[filter]
		    ability=heat_aura1
	    	[/filter]
	    	[if]
	    	    frequency=4
                    start_time=-9000
            	    [frame]
            	    	image="units/royal-army/mages/sun-mage/female-stand-[1~7].png:100"
            	    	sound="royal-army/sun-mage/female-attack-dragonflame.wav"
		    	halo="halo/sun-mage/heat-aura+female-[1~2].png:100"
		    	duration=9000
            	    [/frame]
	    	[/if]
	    	[else]
                    start_time=0
       	    	    [frame]
            	    	image="units/royal-army/mages/sun-mage/female-stand-[1~7].png:100"
		    	halo="halo/sun-mage/heat-aura+female-[1~2].png:100"
            	    [/frame]
	    	[/else]
	    [/if]
	    [else]
	    	[if]
	    	    frequency=4
                    start_time=-9000
            	    [frame]
            	    	image="units/royal-army/mages/sun-mage/female-stand-[1~7].png:100"
            	    	sound="royal-army/sun-mage/female-attack-dragonflame.wav"
		    	duration=9000
            	    [/frame]
	    	[/if]
	    	[else]
                    start_time=0
       	    	    [frame]
            	    	image="units/royal-army/mages/sun-mage/female-stand-[1~7].png:100"
            	    [/frame]
	    	[/else]	
	    [/else]
    	[/draw_weapon_anim]
    	[draw_weapon_anim]
            [filter_attack]
            	name=spell_302
            [/filter_attack]
	    {STAND_ON_WATER}
	    [if]
	    	[filter]
		    ability=heat_aura1
	    	[/filter]
	    	[if]
	    	    frequency=4
                    start_time=-3000
            	    [frame]
            	    	image="units/royal-army/mages/sun-mage/female-stand-[1~7].png:100"
            	    	sound="royal-army/sun-mage/female-attack-lightning.wav"
		    	halo="halo/sun-mage/heat-aura+female-[1~2].png:100"
		    	duration=3000
            	    [/frame]
	    	[/if]
	    	[else]
                    start_time=0
       	    	    [frame]
            	    	image="units/royal-army/mages/sun-mage/female-stand-[1~7].png:100"
		    	halo="halo/sun-mage/heat-aura+female-[1~2].png:100"
            	    [/frame]
	    	[/else]
	    [/if]
	    [else]
	    	[if]
	    	    frequency=4
                    start_time=-3000
            	    [frame]
            	    	image="units/royal-army/mages/sun-mage/female-stand-[1~7].png:100"
            	    	sound="royal-army/sun-mage/female-attack-lightning.wav"
		    	duration=3000
            	    [/frame]
	    	[/if]
	    	[else]
                    start_time=0
       	    	    [frame]
            	    	image="units/royal-army/mages/sun-mage/female-stand-[1~7].png:100"
            	    [/frame]
	    	[/else]	
	    [/else]
    	[/draw_weapon_anim]
	[draw_weapon_anim]
            [filter_attack]
            	name=spell_303
            [/filter_attack]
	    {STAND_ON_WATER}
	    [if]
	    	[filter]
		    ability=heat_aura1
	    	[/filter]
	    	[if]
	    	    frequency=4
                    start_time=-5000
            	    [frame]
            	    	image="units/royal-army/mages/sun-mage/female-stand-[1~7].png:100"
            	    	sound="royal-army/sun-mage/female-attack-flametomb.wav"
		    	halo="halo/sun-mage/heat-aura+female-[1~2].png:100"
		    	duration=5000
            	    [/frame]
	    	[/if]
	    	[else]
                    start_time=0
       	    	    [frame]
            	    	image="units/royal-army/mages/sun-mage/female-stand-[1~7].png:100"
		    	halo="halo/sun-mage/heat-aura+female-[1~2].png:100"
            	    [/frame]
	    	[/else]
	    [/if]
	    [else]
	    	[if]
	    	    frequency=4
                    start_time=-5000
            	    [frame]
            	    	image="units/royal-army/mages/sun-mage/female-stand-[1~7].png:100"
            	    	sound="royal-army/sun-mage/female-attack-flametomb.wav"
		    	duration=5000
            	    [/frame]
	    	[/if]
	    	[else]
                    start_time=0
       	    	    [frame]
            	    	image="units/royal-army/mages/sun-mage/female-stand-[1~7].png:100"
            	    [/frame]
	    	[/else]	
	    [/else]
    	[/draw_weapon_anim]
    	[draw_weapon_anim]
            [filter_attack]
	    	[not]
            	    name=spell_201
		    [or]
		    	name=spell_102
			[or]
			    name=spell_301
			    [or]
				name=spell_302
				[or]
				     name=spell_303
				[/or]
			    [/or]
			[/or]
		    [/or]
	    	[/not]
            [/filter_attack]
	    {STAND_ON_WATER}
	    [if]
	    	[filter]
		    ability=heat_aura1
	        [/filter]
	    	[if]
	    	    frequency=4
                    start_time=-2000
            	    [frame]
            	    	image="units/royal-army/mages/sun-mage/female-stand-[1~7].png:100"
            	    	sound="royal-army/sun-mage/female-attack.wav"
		    	halo="halo/sun-mage/heat-aura+female-[1~2].png:100"
		    	duration=2000
            	    [/frame]
	    	[/if]
	    	[else]
                    start_time=0
       	    	    [frame]
             	    	image="units/royal-army/mages/sun-mage/female-stand-[1~7].png:100"
		    	halo="halo/sun-mage/heat-aura+female-[1~2].png:100"
            	    [/frame]
	    	[/else]
	    [/if]
	    [else]
	    	[if]
	    	    frequency=4
                    start_time=-2000
            	    [frame]
            	    	image="units/royal-army/mages/sun-mage/female-stand-[1~7].png:100"
            	    	sound="royal-army/sun-mage/female-attack.wav"
		    	duration=2000
            	    [/frame]
	    	[/if]
	    	[else]
                    start_time=0
       	    	    [frame]
             	    	image="units/royal-army/mages/sun-mage/female-stand-[1~7].png:100"
            	    [/frame]
	    	[/else]
	    [/else]	
    	[/draw_weapon_anim]
    	[attack_anim]
            [filter_attack]
            	name=staff
            [/filter_attack]
	    {STAND_ON_WATER}
	    [if]
	    	[filter]
		    ability=heat_aura1
	    	[/filter]
            	[frame]
	    	    halo="halo/sun-mage/heat-aura+female-[1~2].png:100"
            	[/frame]
	    [/if]
            [if]
            	[filter]
           	    [filter_wml]
              	    	[status]
                 	    miner=yes
              	    	[/status]
           	    [/filter_wml]
            	[/filter]		 
            	offset=0.0

            	flame_burst_1_start_time=-200
            	flame_burst_2_start_time=-200
            	flame_burst_3_start_time=-200
            	flame_burst_4_start_time=-200
            	flame_burst_5_start_time=-200

            	[if]
            	    direction=se,s,sw

            	    [flame_burst_1_frame]
                    	halo=halo/flame-burst-[1~8].png~FL(vert):50
                    	halo_x,halo_y=-22,0
                    	offset=1.0
            	    [/flame_burst_1_frame]
            	    [flame_burst_2_frame]
                    	halo=halo/flame-burst-[1~8].png~FL(vert):50
                    	halo_x,halo_y=-14,9
                    	offset=1.0
            	    [/flame_burst_2_frame]
            	    [flame_burst_3_frame]
                    	halo=halo/flame-burst-[1~8].png~FL(vert):50
                    	halo_x,halo_y=0,12
                    	offset=1.0
            	    [/flame_burst_3_frame]
            	    [flame_burst_4_frame]
                    	halo=halo/flame-burst-[1~8].png~FL(vert):50
                    	halo_x,halo_y=14,9
                    	offset=1.0
            	    [/flame_burst_4_frame]
            	    [flame_burst_5_frame]
                    	halo=halo/flame-burst-[1~8].png~FL(vert):50
                    	halo_x,halo_y=22,0
                    	offset=1.0
            	    [/flame_burst_5_frame]
            	[/if]
            	[else]
            	    direction=ne,n,nw

            	    [flame_burst_1_frame]
                    	halo=halo/flame-burst-[1~8].png:50
                    	halo_x,halo_y=-22,0
                    	offset=1.0
            	    [/flame_burst_1_frame]
            	    [flame_burst_2_frame]
                    	halo=halo/flame-burst-[1~8].png:50
                    	halo_x,halo_y=-14,9
                    	offset=1.0
            	    [/flame_burst_2_frame]
            	    [flame_burst_3_frame]
                    	halo=halo/flame-burst-[1~8].png:50
                    	halo_x,halo_y=0,12
                    	offset=1.0
            	    [/flame_burst_3_frame]
            	    [flame_burst_4_frame]
                    	halo=halo/flame-burst-[1~8].png:50
                    	halo_x,halo_y=14,9
                    	offset=1.0
            	    [/flame_burst_4_frame]
            	    [flame_burst_5_frame]
                    	halo=halo/flame-burst-[1~8].png:50
                    	halo_x,halo_y=22,0
                    	offset=1.0
            	    [/flame_burst_5_frame]
            	[/else]

            	{SOUND:HIT_AND_MISS fire.wav fire.wav -300}
	    [/if]
	    [else]
            	start_time=-250
            	offset=0.0~0.5:250,0.5~0.0:250
            	{SOUND:HIT_AND_MISS staff.ogg staff-miss.ogg -125}
	    [/else]
    	[/attack_anim]
    	[attack_anim]
            [filter_attack]
            	name=spell_202
            [/filter_attack]
	    {STAND_ON_WATER}
	    [if]
	    	[filter]
		    ability=heat_aura1
	    	[/filter]
            	[frame]
	    	    halo="halo/sun-mage/heat-aura+female-[1~2].png:100"
            	[/frame]
	    [/if]
            start_time=-250
            offset=0.0~0.5:250,0.5~0.0:250
            {SOUND:HIT_AND_MISS {SOUND_LIST:SWORD_SWISH} {SOUND_LIST:MISS} -75}
    	[/attack_anim]
    	[attack_anim]
            [filter_attack]
            	name=spell_102
            [/filter_attack]
	    {STAND_ON_WATER}
	    [if]
	    	[filter]
		    ability=heat_aura1
	    	[/filter]
            	[frame]
	    	    halo="halo/sun-mage/heat-aura+female-[1~2].png:100"
            	[/frame]
	    [/if]
	    {MISSILE_FRAME_FIREBALL_XY 11 -20}
            {SOUND:HIT_AND_MISS fire.wav fire.wav -275}
    	[/attack_anim]
    	[attack_anim]
            [filter_attack]
            	name=spell_201
            [/filter_attack]
	    {STAND_ON_WATER}
	    [if]
	    	[filter]
		    ability=heat_aura1
	    	[/filter]
            	[frame]
	    	    halo="halo/sun-mage/heat-aura+female-[1~2].png:100"
            	[/frame]
	    [/if]
            offset=0.0

            flame_burst_1_start_time=-400
            flame_burst_2_start_time=-350
            flame_burst_3_start_time=-300
            flame_burst_4_start_time=-250
            flame_burst_5_start_time=-200

            [if]
            	direction=se,s,sw

            	[flame_burst_1_frame]
                    halo=halo/flame-burst-[1~8].png~FL(vert):50
                    halo_x,halo_y=-22,0
                    offset=1.0
            	[/flame_burst_1_frame]
            	[flame_burst_2_frame]
                    halo=halo/flame-burst-[1~8].png~FL(vert):50
                    halo_x,halo_y=-14,9
                    offset=1.0
            	[/flame_burst_2_frame]
            	[flame_burst_3_frame]
                    halo=halo/flame-burst-[1~8].png~FL(vert):50
                    halo_x,halo_y=0,12
                    offset=1.0
            	[/flame_burst_3_frame]
            	[flame_burst_4_frame]
                    halo=halo/flame-burst-[1~8].png~FL(vert):50
                    halo_x,halo_y=14,9
                    offset=1.0
            	[/flame_burst_4_frame]
            	[flame_burst_5_frame]
                    halo=halo/flame-burst-[1~8].png~FL(vert):50
                    halo_x,halo_y=22,0
                    offset=1.0
            	[/flame_burst_5_frame]
            [/if]
            [else]
            	direction=ne,n,nw

            	[flame_burst_1_frame]
                    halo=halo/flame-burst-[1~8].png:50
                    halo_x,halo_y=-22,0
                    offset=1.0
            	[/flame_burst_1_frame]
            	[flame_burst_2_frame]
                    halo=halo/flame-burst-[1~8].png:50
                    halo_x,halo_y=-14,9
                    offset=1.0
            	[/flame_burst_2_frame]
            	[flame_burst_3_frame]
                    halo=halo/flame-burst-[1~8].png:50
                    halo_x,halo_y=0,12
                    offset=1.0
            	[/flame_burst_3_frame]
            	[flame_burst_4_frame]
                    halo=halo/flame-burst-[1~8].png:50
                    halo_x,halo_y=14,9
                    offset=1.0
            	[/flame_burst_4_frame]
            	[flame_burst_5_frame]
                    halo=halo/flame-burst-[1~8].png:50
                    halo_x,halo_y=22,0
                    offset=1.0
            	[/flame_burst_5_frame]
            [/else]

            {SOUND:HIT_AND_MISS fire.wav fire.wav -300}
    	[/attack_anim]
    	[attack_anim]
            [filter_attack]
            	name=spell_301
            [/filter_attack]
	    {STAND_ON_WATER}
	    [if]
	    	[filter]
		    ability=heat_aura1
	    	[/filter]
            	[frame]
	    	    halo="halo/sun-mage/heat-aura+female-[1~2].png:100"
            	[/frame]
	    [/if]
            start_time=-1250
            halo_start_time=-250

            [if]
            	{MISSILE_FRAME_DG_SECOND_MUZZLE_FLARE_HIT_SOUTH 0 -4}
            	direction=s
            [/if]
            [else]
            	{MISSILE_FRAME_DG_SECOND_MUZZLE_FLARE_HIT_DIAG_NORTH -8 10}
            	direction=ne,nw
            [/else]
            [else]
            	{MISSILE_FRAME_DG_SECOND_MUZZLE_FLARE_HIT_NORTH -1 16}
            	direction=n
            [/else]
            [else]
            	{MISSILE_FRAME_DG_SECOND_MUZZLE_FLARE_HIT_DIAG_SOUTH 0 8}
            	direction=se,sw
            [/else]

            {SOUND:HIT_AND_MISS fire.wav fire.wav -250}
   	[/attack_anim]
    	[attack_anim]
            [filter_attack]
            	name=spell_303
            [/filter_attack]
	    {STAND_ON_WATER}
	    [if]
	    	[filter]
		    ability=heat_aura1
	    	[/filter]
            	[frame]
	    	    halo="halo/sun-mage/heat-aura+female-[1~2].png:100"
            	[/frame]
	    [/if]
            offset=0.0

            flame_burst_1_start_time=-400
            flame_burst_2_start_time=-350
            flame_burst_3_start_time=-300
            flame_burst_4_start_time=-250
            flame_burst_5_start_time=-200

            [if]
            	direction=se,s,sw

            	[flame_burst_1_frame]
                    halo=halo/flame-burst-[1~8].png~FL(vert):50
                    halo_x,halo_y=-22,0
                    offset=1.0
            	[/flame_burst_1_frame]
            	[flame_burst_2_frame]
                    halo=halo/flame-burst-[1~8].png~FL(vert):50
                    halo_x,halo_y=-14,9
                    offset=1.0
            	[/flame_burst_2_frame]
            	[flame_burst_3_frame]
                    halo=halo/flame-burst-[1~8].png~FL(vert):50
                    halo_x,halo_y=0,12
                    offset=1.0
            	[/flame_burst_3_frame]
            	[flame_burst_4_frame]
                    halo=halo/flame-burst-[1~8].png~FL(vert):50
                    halo_x,halo_y=14,9
                    offset=1.0
            	[/flame_burst_4_frame]
            	[flame_burst_5_frame]
                    halo=halo/flame-burst-[1~8].png~FL(vert):50
                    halo_x,halo_y=22,0
                    offset=1.0
            	[/flame_burst_5_frame]
            [/if]
            [else]
            	direction=ne,n,nw

            	[flame_burst_1_frame]
                    halo=halo/flame-burst-[1~8].png:50
                    halo_x,halo_y=-22,0
                    offset=1.0
            	[/flame_burst_1_frame]
            	[flame_burst_2_frame]
                    halo=halo/flame-burst-[1~8].png:50
                    halo_x,halo_y=-14,9
                    offset=1.0
            	[/flame_burst_2_frame]
            	[flame_burst_3_frame]
                    halo=halo/flame-burst-[1~8].png:50
                    halo_x,halo_y=0,12
                    offset=1.0
            	[/flame_burst_3_frame]
            	[flame_burst_4_frame]
                    halo=halo/flame-burst-[1~8].png:50
                    halo_x,halo_y=14,9
                    offset=1.0
            	[/flame_burst_4_frame]
            	[flame_burst_5_frame]
                    halo=halo/flame-burst-[1~8].png:50
                    halo_x,halo_y=22,0
                    offset=1.0
            	[/flame_burst_5_frame]
            [/else]

            {SOUND:HIT_AND_MISS fire.wav fire.wav -300}
    	[/attack_anim]
        [attack_anim]
            [filter_attack]
            	name=spell_302
            [/filter_attack]
	    {STAND_ON_WATER}
	    [if]
	    	[filter]
		    ability=heat_aura1
	    	[/filter]
            	[frame]
	    	    halo="halo/sun-mage/heat-aura+female-[1~2].png:100"
            	[/frame]
	    [/if]
	    [if]
	    	frequency=4
                {LIGHTNING_BOLT 1}
	    [/if]
	    [else]
		[if]
		     frequency=2
		     {LIGHTNING_BOLT 2}
		[/if]
		[else]
		     {LIGHTNING_BOLT 3} 
		[/else]
	    [/else]
            {SOUND:HIT_AND_MISS lightning.ogg lightning-miss.ogg -300}
    	[/attack_anim]
    	[victory_anim]
            start_time=-5000
	    {STAND_ON_WATER}
	    [if]
	    	[filter]
		    ability=heat_aura1
	    	[/filter]
            	[frame]
	    	    halo="halo/sun-mage/heat-aura+female-[1~2].png:100"
		    image="units/royal-army/mages/sun-mage/female-stand-[1~7].png:100"
		    sound="royal-army/red-mage/female-kill.wav"
	    	    duration=5000
            	[/frame]
	    [/if]
	    [else]
            	[frame]
            	    image="units/royal-army/mages/sun-mage/female-stand-[1~7].png:100"
            	    sound="royal-army/red-mage/female-kill.wav"
	    	    duration=5000
            	[/frame]
	    [/else]
    	[/victory_anim]
    [/female]
[/unit_type]

#define FLAMETOMB
    [advancement]
        id=Royal Sun Mage Flametomb
        description= _ "Learn ''Flaming Tomb'' spell
which inflicts 18-1 fire damage"
	image=spellbook/flaming-tomb.png
        {HIGH_FLAME_TOMB 0}
	[effect]
	    apply_to=type
	    name=Royal Sun Mage
	[/effect]  
    [/advancement]
#enddef
#define LIGHTNING
    [advancement]
        id=Royal Sun Mage Lightning
        description= _ "Learn ''Lightning'' spell
which inflicts 12-L electrical damage
and replaces ''Fireball'' spell"
	image=spellbook/lightning.png
        {HIGH_LIGHTNING 0}
	[effect]
	    apply_to=type
	    name=Royal Sun Mage
	[/effect]  
    [/advancement]
#enddef
#define DRAGONFLAME
    [advancement]
        id=Royal Sun Mage Dragonflame
        description= _ "Upgrade ''Stream of Flame'' spell
to ''Dragon Flame'' spell
which inflicts the same damage with ignition"
	image=spellbook/dragon-flame.png
        {HIGH_DRAGON_FLAME 0}
	[effect]
	    apply_to=type
	    name=Royal Sun Mage
	[/effect]  
    [/advancement]
#enddef

[unit_type]
    id=Royal Sun Mage Fake
    [base_unit]
        id=Royal Sun Mage Temp
    [/base_unit]
    hide_help=true
    do_not_list=yes
    advances_to=null
    {FLAMETOMB}
    {LIGHTNING}
[/unit_type]
[unit_type]
    id=Royal Sun Mage Fake Withdragonflame
    [base_unit]
        id=Royal Sun Mage Temp
    [/base_unit]
    hide_help=true
    do_not_list=yes
    advances_to=null
    {DRAGONFLAME}
    {FLAMETOMB}
    {LIGHTNING}
[/unit_type]
[unit_type]
    id=Royal Sun Mage
    [base_unit]
        id=Royal Sun Mage Temp
    [/base_unit]
    hide_help=true
    do_not_list=yes
[/unit_type]
